!window.addEventListener&&Element.prototype&&function(e){function t(){}function n(e,n,r){r=!!r;var o=this;o.__eventListener=o.__eventListener||{},o.__eventListener[e]=o.__eventListener[e]||[[],[]],o.__eventListener[e][0].length||o.__eventListener[e][1].length||(o.__eventListener["on"+e]=function(n){var r,v=new t,i=[],s=n.srcElement||o;for(r in n)v[r]=n[r];for(v.currentTarget=o,v.pageX=n.clientX+document.documentElement.scrollLeft,v.pageY=n.clientY+document.documentElement.scrollTop,v.target=s,v.timeStamp=+new Date,v.nativeEvent=n;s;)i.unshift(s),s=s.parentNode;for(var _,c=0;_=i[c];++c)if(_.__eventListener&&_.__eventListener[e])for(var a,L=0;a=_.__eventListener[e][0][L];++L)a.call(o,v);i.reverse();for(var _,c=0;(_=i[c])&&!n.cancelBubble;++c)if(_.__eventListener&&_.__eventListener[e])for(var a,L=0;(a=_.__eventListener[e][1][L])&&!n.cancelBubble;++L)a.call(o,v);n.cancelBubble=!0},o.attachEvent("on"+e,o.__eventListener["on"+e])),o.__eventListener[e][r?0:1].push(n)}function r(e,t,n){n=!!n;var r,o=this;for(o.__eventListener=o.__eventListener||{},o.__eventListener[e]=o.__eventListener[e]||[[],[]],r=o.__eventListener[e][n?0:1],eventIndex=r.length-1,eventLength=-1;eventIndex>eventLength;--eventIndex)r[eventIndex]==t&&r.splice(eventIndex,1)[0][1];o.__eventListener[e][0].length||o.__eventListener[e][1].length||o.detachEvent("on"+e,o.__eventListener["on"+e])}t.prototype.preventDefault=function(){this.nativeEvent.returnValue=!1},t.prototype.stopPropagation=function(){this.nativeEvent.cancelBubble=!0},window.constructor.prototype.addEventListener=document.constructor.prototype.addEventListener=Element.prototype.addEventListener=n,window.constructor.prototype.removeEventListener=document.constructor.prototype.removeEventListener=Element.prototype.removeEventListener=r}();